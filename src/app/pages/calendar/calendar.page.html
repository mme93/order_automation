<ion-header>
  <ion-toolbar>
    <ion-title>Calender</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button color="primary" (click)="today()">Today</ion-button>
      <ion-button color="primary" (click)="changeMode('month')">Month</ion-button>
      <ion-button color="primary" (click)="changeMode('week')">Week</ion-button>
      <ion-button color="primary" (click)="changeMode('day')">Day</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col size="2">
      <ion-button fill="clear" (click)="back()">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-col>

    <ion-col size="8" class="ion-text-center">
      <h1>{{shownYear}} {{shownMonth}}</h1>
    </ion-col>

    <ion-col size="2">
      <ion-button fill="clear" (click)="next()">
        <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-card *ngIf="currentMode==='week'" class="calendar_card_week">
    <ion-row class="calendar_card_week_name">
      <ion-col *ngFor="let dayCol of days" size="1.714" style="border-style: solid">
        {{dayCol}}
      </ion-col>
    </ion-row>

    <ion-row *ngFor="let row of rows;let i=index" class="calendar_row_week">
      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>

      <ion-col size="1.714" *ngIf="i === selectedRowIndex" class="calendar_col_week">

      </ion-col>
    </ion-row>
  </ion-card>

  <ion-card *ngIf="currentMode==='day'" class="calendar_card_day">

    <ion-row *ngFor="let hour of hours" class="calendar_row_day">
      {{hour}}
    </ion-row>
  </ion-card>

  <ion-card *ngIf="currentMode==='month'">
    <ion-row>
      <ion-col *ngFor="let dayCol of days" size="1.714" style="border-style: solid">
        {{dayCol}}
      </ion-col>
    </ion-row>
    <div *ngIf="currentMonthIndex === todayMonthIndex">
      <ion-row *ngFor="let row of rows;let i=index" class="calendar_row">
        <ion-col size="1.714" class="calendar_col_today" *ngIf="i * 7 === todayDayIndex">
          {{month[i * 7].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="i * 7 !== todayDayIndex">
          {{month[i * 7].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="1 + (i * 7) === todayDayIndex ">
          {{month[1 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="1 + (i * 7) !== todayDayIndex ">
          {{month[1 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="2 + (i * 7) === todayDayIndex ">
          {{month[2 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="2 + (i * 7) !== todayDayIndex ">
          {{month[2 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="3 + (i * 7) === todayDayIndex ">
          {{month[3 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="3 + (i * 7) !== todayDayIndex ">
          {{month[3 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="4 + (i * 7) === todayDayIndex ">
          {{month[4 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="4 + (i * 7) !== todayDayIndex ">
          {{month[4 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="5+ (i * 7) === todayDayIndex ">
          {{month[5 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="5+ (i * 7) !== todayDayIndex ">
          {{month[5 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col_today" *ngIf="6 + (i * 7) === todayDayIndex ">
          {{month[6 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col" *ngIf="6 + (i * 7) !== todayDayIndex ">
          {{month[6 + (i * 7)].day}}
        </ion-col>

      </ion-row>
    </div>
    <div *ngIf="currentMonthIndex !== todayMonthIndex">
      <ion-row *ngFor="let row of rows;let i=index" class="calendar_row">
        <ion-col size="1.714" class="calendar_col">
          {{month[i * 7].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[1 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[2 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[3 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[4 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[5 + (i * 7)].day}}
        </ion-col>

        <ion-col size="1.714" class="calendar_col">
          {{month[6 + (i * 7)].day}}
        </ion-col>
      </ion-row>
    </div>

  </ion-card>

</ion-content>
